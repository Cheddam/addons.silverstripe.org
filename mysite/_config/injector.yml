---
name: 'addonsinjector'
---
SilverStripe\Core\Injector\Injector:
  SilverStripe\Addons\Services\AddonBuilder:
    constructor:
      - %$SilverStripe\Addons\Services\PackagistService
  SilverStripe\Addons\Services\AddonUpdater:
    constructor:
      - %$SilverStripe\Addons\Services\PackagistService
      - %$SilverStripe\Addons\Services\ElasticaService
      - %$SilverStripe\Addons\Services\ResqueService
      - %$Composer\Package\Version\VersionParser
  RequestProcessor:
    properties:
      filters:
        - %$SilverStripe\Addons\Controllers\SiteErrorPageFilter
  SilverStripe\Addons\Services\SilverStripeVersionUpdater:
    constructor:
      - %$SilverStripe\Addons\Services\PackagistService
  SilverStripe\Addons\Tasks\UpdateAddonsTask:
    constructor:
      - %$SilverStripe\Addons\Services\AddonUpdater
  SilverStripe\Addons\Tasks\UpdateSilverStripeVersionsTask:
    constructor:
      - %$SilverStripe\Addons\Services\SilverStripeVersionUpdater
  SilverStripe\Addons\Tasks\BuildAddonsTask:
    constructor:
      - %$SilverStripe\Addons\Services\AddonBuilder
---
Only:
  environment: 'live'
After:
  - '#elastica'
---
SilverStripe\Core\Injector\Injector:
  ElasticaService:
    class: SilverStripe\Elastica\ElasticaService
    constructor:
      client: %$ElasticClient
      index: addons
---
Except:
  environment: 'live'
After:
  - '#elastica'
---
SilverStripe\Core\Injector\Injector:
  ElasticaService:
    class: SilverStripe\Elastica\ElasticaService
    constructor:
      client: %$ElasticClient
      index: addons-dev
